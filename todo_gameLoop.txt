TODO: GAME LOOP & PROGRESSION
ALWAYS read game_loop_description.txt before starting to work on things.

MILESTONE 1: FAILURE & BOOM MECHANICS
[x] Implement gradual warning system
    [x] Add visual pulsing/flashing when Temp or Power nears critical.
    [x] Add acoustic warnings (alarm sound).
[x] Implement BOOM event
    [x] Create `triggerBoom()` function in `game.js`/`sketch.js`.
    [x] Stop simulation loop.
    [x] Display "Explosion Overlay".
    [x] Play explosion sound.
    [x] Check Prestige Conditions in `triggerBoom()`:
        *   Logic: Fetch thresholds from `PrestigeManager.currentLevelData` (to be created).
        *   IF (Money >= Threshold AND Power >= Threshold): Go to PRESTIGE.
            - Show text: "Atom's blessing granted - The Great Glow achieved." and a button "Go to level N"
        *   ELSE: Go to SETBACK.
[x] Implement SETBACK state (Non-Prestige Boom)
    *   Condition: Triggers when exploding without meeting thresholds.
    [x] Calculate setback penalty:
        *   Loss: -25% of current Total Money (or `money = money * 0.75`).
    [x] Ensure values don't drop below prestige level minimums.
    [x] Trigger Autosave immediately.
    [x] Update Explosion Overlay:
        *   Text: "Reactor Melted - Progress Lost".
        *   Animation: Fade in text/buttons after 2 seconds.
        *   Input: Disable standard inputs. Remove "Right-click to reset".
        *   Button: "88mph backwards" and mouseover "Roll back time and try again" (reloads/resets scene with penalty applied).

  
MILESTONE 2: PRESTIGE SYSTEM CORE
[x] Create `prestige.js` / `PrestigeManager`
    *   Decision: Use a singleton Object `prestigeManager` for simplicity.
    [x] Define Data Structure `PrestigeData` logic:
        *   `loopNumber`: Current iteration (Starts at 1).
        *   `thresholds`: { money: X, power: Y } needed to advance.
        *   `bonuses`:
            *   `maxHeatCap` (Global Limit). /increases with prestige, start 200C
            *   `maxPowerCap` (Global Limit). /increases with prestige, start 200kW
            *   heatingRate (endgame: 50, startgame: 200) /for easier first levels
            *   collisionProbability (default 0.055-ish) /0.1 startgame, 0.055 endgame
            *   decayProbability (default 0.0001) /to be tested
    [x] Implement scaling logic:
        *   Scale meters and boom logic to current prestige level values
[x] Prestige Reset Logic `resetRunForPrestige()`
    [x] Increment `loopNumber`.
    [x] Reset Inventory:
        *   2 Atom Groups (Centermost) with 15 rows of atoms each.
        *   1 Moderator (Center).
        *   lowest level plutonium and californium are owned, after first levels when they're unlocked
    [x] Reset Money to 0.
    [x] Apply new thresholds and scaling from `PrestigeData`.
    [x] Save `PrestigeData`.
    [x] Trigger Autosave.

MILESTONE 3: DEV TOOLS (Priority for balancing)
[x] Dev Menu UI
    [x] Create HTML overlay below the game canvas.
    [x] Style: Plain minimal CSS (no visuals needed).
[x] Dev Functionality
    [x] Input: "Jump to Loop #" (Int).
    [x] Input: "Set Money" (Float).
    [x] Input: "Infinite Money" (checkbox).
    [x] Input: Simple inputs for key values (settings{} variables, prestige variables).
    [x] Button: "Print Configuration".
        *   Action: `console.log(something)` for easy copy-pasting into source code.

MILESTONE 4: LOOP CONTENT & PROGRESSION
[ ] Define Pre-set Loops (The Tutorial Phase)
    [ ] Loop 1 Data:
        *   Low thresholds.
        *   No Californium available.
        *   Plutonium unlocks at tutorial point
        *   Water Valve: Locked.
        *   Nothing in shop at start (tutorial will unlock shop items to be purchaseable, and these unlocks persist always)
    [ ] Loop 2 Data:
        *   Higher thresholds.
        *   Unlock: Californium via tutorial.
        *   Tutorial event: unlock uranium in shop
    [ ] Loop 3 Data:
        *   Unlock: Water Valve manual control.
        *   Tutorial event: unlock uranium groups in shop
    [ ] Loop 4 Data:
        *   Unlock: Buy more moderators in shop.  //NOT IMPLEMENTED, moderators are always available now, needs fix
        *   Tutorial event: unlock moderator upgrades in shop
        *   Tutorial event: link moderators button in shop, trigger when buying 3rd moderator
    [ ] Loop N (Procedural):
        *   Algorithm to scale Money/Power requirements exponentially (e.g., 1.5x previous).
        *   And make the game harder
[ ] UI Conditional Visibility
    [ ] Modify `ui.js`:
        *   Check `prestigeManager.loopNumber`.
        *   Hook up Gauge/Meter max values to `prestige.js` scaling factors.


MILESTONE 5: TUTORIAL SYSTEM
[x] Tutorial Manager
    [x] Create `TutorialManager` class/object.
    [x] State: boolean `isEnabled` (stored in settings/save). Default: TRUE for new saves.
    [x] Menu: Add toggle in Options to disable tutorials.
[x] Tutorial Functionality //needs to be refactored for easier tutorial text storage and function calling
    [x] `showTutorial(title, text, highlightTarget)`
        *   Pauses game.
        *   Draws window with text. Window position can be edited per tutorial item.
            * supports multiple consecutive windows, and actions after each window.
        *   Optional: Highlights a UI element (red circle or blinking border or blinking graphics layer).
[ ] Planned Tutorials (Trigger points):
    [x] Start of Game (Welcome). The player has inherited an old building from their goofy Ukranian granpa. Bla bla bla, make a short story.
    [x] Timer 30sec. The player has noticed the weird building is a old nuclear reactor.
    [x] Timer 30sec after previous. Notice the reactor is useless shit, give plutonium.
    [x] First bit of Heat generated (50c). Show temp meter.
    [ ] First bit of Power generated (20kW). The player hears a low hum as the reactor is brought back to life. Play ambient sounds at this point.
    [ ] Timer 1min after power tutorial. The player wonders if he can sell the generated power. Show money stats.
    [ ] 10 money earned, unlock the shop.
    [x] Each item Unlock (Shop) triggers a tutorial, and gives an explanation what the item in question does. Also some short bit of bg lore.
    [x] First Prestige available. Some explanation and a bit of lore. There is some weird thing that looks like [describe a flux capacitor but don't mention it's name], bla bla.
    [x] Failed Prestige. Some lore that hints something vague about back to the future.
    [x] Successful Prestige. Lore and explanation.
    [x] Tutorial prestiges done, going endless. Some text, idk.

MILESTONE 6: SAVE/LOAD REFINEMENTS
[x] Title Screen Slots
    [x] 3 Slots visible.
    [x] Start loads selected.
[x] In-Game Menu Updates
    [x] Remove "Save" and "Load" individual buttons.
    [x] Rename "Quit" -> "Save & Quit". (remember to actually add the save functionality to it)
[x] Autosave Triggers
    [x] Timer: Every 60s.
    [x] Event: On Boom (Setback).
    [x] Event: On Prestige.
    [x] Event: On Quit.


MISC THINGS, bugs, etc:
